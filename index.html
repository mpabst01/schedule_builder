<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <h1 class="display-4">Work Day Scheduler</h1>
        <p class="lead">A simple calendar app for scheduling your work day</p>
        <br>
        <p class="currentDate">
          <a id="currentDay" href = test.html></a>
        </p>
      </div>
    </div>
    <div class="container"></div>
      <!-- use class for "past", "present", and "future" to apply styles
        to the time-block divs accordingly. (you'll need to do this in your
        JavaScript code. Don't forget to delete this comment when you are done.
        The classes are used as examples below and should be removed from the html
        in the finished product.) -->


      <!-- example of a past time block -->
      <div id="hour-9" class="row time-block past">
        <div class="col-md-1 hour">
          9AM
        </div>
        <textarea class="col-md-10 description"> </textarea>
        <button class="btn saveBtn col-md-1">
          <i class="fas fa-save"></i>
        </button>
      </div>

      <!-- example of a present time block -->
      <div id="hour-10" class="row time-block present">
        <div class="col-md-1 hour">
          10AM
        </div>
        <textarea class="col-md-10 description"> </textarea>
        <button class="btn saveBtn col-md-1">
          <i class="fas fa-save"></i>
        </button>
      </div>

      <!-- example of a future time block -->
      <div id="hour-11" class="row time-block future">
        <div class="col-md-1 hour">
          11AM
        </div>
        <textarea class="col-md-10 description"> </textarea>
        <button class="btn saveBtn col-md-1">
          <i class="fas fa-save"></i>
        </button>
      </div>

      <div id="hour-12" class="row time-block">
        <div class="col-md-1 hour">
          12PM
        </div>
        <textarea class="col-md-10 description"> </textarea>
        <button class="btn saveBtn col-md-1">
          <i class="fas fa-save"></i>
        </button>
      </div>
      <div id="hour-13" class="row time-block">
        <div class="col-md-1 hour">
          1PM
        </div>
        <textarea class="col-md-10 description"> </textarea>
        <button class="btn saveBtn col-md-1">
          <i class="fas fa-save"></i>
        </button>
      </div>
      <div id="hour-14" class="row time-block">
        <div class="col-md-1 hour">
          2PM
        </div>
        <textarea class="col-md-10 description"> </textarea>
        <button class="btn saveBtn col-md-1">
          <i class="fas fa-save"></i>
        </button>
      </div>
      <div id="hour-15" class="row time-block">
        <div class="col-md-1 hour">
          3PM
        </div>
        <textarea class="col-md-10 description"> </textarea>
        <button class="btn saveBtn col-md-1">
          <i class="fas fa-save"></i>
        </button>
      </div>
      <div id="hour-16" class="row time-block">
        <div class="col-md-1 hour">
          4PM
        </div>
        <textarea class="col-md-10 description"> </textarea>
        <button class="btn saveBtn col-md-1">
          <i class="fas fa-save"></i>
        </button>
      </div>
      <div id="hour-17" class="row time-block">
        <div class="col-md-1 hour">
          5PM
        </div>
        <textarea class="col-md-10 description"> </textarea>
        <button class="btn saveBtn col-md-1">
          <i class="fas fa-save"></i>
        </button>
      </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
      $(function() {
  // listen for save button clicks
  $(".saveBtn").on("click", function() {
    // get nearby values
    var value = $(this).siblings(".description").val();
    var time = $(this).parent().attr("id");

    // save in localStorage
    localStorage.setItem(time, value);
  });

  function hourUpdater() {
    // get current number of hours
    var currentHour = moment().hours();

    // loop over time blocks
    $(".time-block").each(function() {
      // jQuery makes it so that "this" refers to each .time-block
      // element within the function passed to each
      var blockHour = parseInt($(this).attr("id").split("-")[1]);

      // check if we've moved past this time
      if (blockHour < currentHour) {
        $(this).addClass("past");
      } 
      else if (blockHour === currentHour) {
        $(this).removeClass("past");
        $(this).addClass("present");
      } 
      else {
        $(this).removeClass("past");
        $(this).removeClass("present");
        $(this).addClass("future");
      }
    });
  }

  hourUpdater();

  // set up interval to check if current time needs to be updated
  setInterval(hourUpdater, 15000);

  // load any saved data from localStorage
  $("#hour-9 .description").val(localStorage.getItem("hour-9"));
  $("#hour-10 .description").val(localStorage.getItem("hour-10"));
  $("#hour-11 .description").val(localStorage.getItem("hour-11"));
  $("#hour-12 .description").val(localStorage.getItem("hour-12"));
  $("#hour-13 .description").val(localStorage.getItem("hour-13"));
  $("#hour-14 .description").val(localStorage.getItem("hour-14"));
  $("#hour-15 .description").val(localStorage.getItem("hour-15"));
  $("#hour-16 .description").val(localStorage.getItem("hour-16"));
  $("#hour-17 .description").val(localStorage.getItem("hour-17"));

  // display current day on page
  $("#currentDay").text(moment().format("dddd, MMMM Do"));
});



    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <!-- link your javascript files here. (Must be after jquery is linked!
      You should be able to explain why that is to be "employer ready".) -->
  </body>
</html>
